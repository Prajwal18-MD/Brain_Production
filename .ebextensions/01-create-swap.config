commands:
  01_create_swapfile:
    test: '[ ! -f /swapfile ]'
    command: 'fallocate -l 2048M /swapfile && chmod 600 /swapfile && mkswap /swapfile'
  02_enable_swap:
    test: 'swapon --show=NAME | grep -q /swapfile || swapon /swapfile'
    command: 'echo "Swap enabled"'
  03_persist_swap:
    test: 'grep -q "/swapfile" /etc/fstab || echo "/swapfile none swap sw 0 0" >> /etc/fstab'
    command: 'echo "Persisted swap to fstab"'
